import{_ as p,r as t,o as l,c as u,a as n,d as s,b as a,w as i,e}from"./app-BZii1ESa.js";const r={},k=e('<h1 id="如何使用chatgpt" tabindex="-1"><a class="header-anchor" href="#如何使用chatgpt"><span>如何使用chatgpt</span></a></h1><h2 id="_0-序言" tabindex="-1"><a class="header-anchor" href="#_0-序言"><span>0. 序言</span></a></h2><p>感谢伟大的cloudflare（白嫖）</p><h2 id="_1-搭建代理" tabindex="-1"><a class="header-anchor" href="#_1-搭建代理"><span>1. 搭建代理</span></a></h2><h3 id="_1-1-购买域名" tabindex="-1"><a class="header-anchor" href="#_1-1-购买域名"><span>1.1 购买域名</span></a></h3><p>从域名服务商处购买一个域名，自定义即可，推荐使用.online域名(已知，.gmai.com, .cn, .top域名邮箱已经被OpenAI封禁)，便宜而且注册ChatGPT账号时不会被封禁</p><h3 id="_1-2-将域名添加到cloudflare" tabindex="-1"><a class="header-anchor" href="#_1-2-将域名添加到cloudflare"><span>1.2 将域名添加到cloudflare</span></a></h3><p>https://zhuanlan.zhihu.com/p/620135485#</p><h3 id="_1-3-添加workers" tabindex="-1"><a class="header-anchor" href="#_1-3-添加workers"><span>1.3 添加workers</span></a></h3><ul><li>在cloudflare管理台页面，选择Workers 和 Pages</li><li>点击创建应用程序，然后点击 <strong>创建Worker</strong> ，名称随意命名 <img src="https://img.woodli.io/img/202402011724243.png" alt=""></li><li>点击部署，然后点击 <strong>编辑代码</strong><img src="https://img.woodli.io/img/202402011725842.png" alt=""></li></ul>',10),d={href:"https://github.com/yonggekkk/Cloudflare-workers-pages-vless/blob/main/_worker.js",target:"_blank",rel:"noopener noreferrer"},m=n("summary",null,"点击展开查看脚本内容",-1),b=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// <!--GAMFC-->version base on commit 43fad05dcdae3b723c53c226f8181fc5bd47223e, time is 2023-06-22 15:20:02 UTC<!--GAMFC-END-->."),s(`
`),n("span",{class:"token comment"},"// @ts-ignore"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" connect "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'cloudflare:sockets'"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// How to generate your own UUID:"),s(`
`),n("span",{class:"token comment"},'// [Windows] Press "Win + R", input cmd and run:  Powershell -NoExit -Command "[guid]::NewGuid()"'),s(`
`),n("span",{class:"token keyword"},"let"),s(" userID "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'77a571fb-4fd2-4b37-8596-1b7d9728bb5c'"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"const"),s(" proxyIPs "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"[2a01:4f8:c2c:123f:64:5:ac40:6c0a]"'),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),n("span",{class:"token comment"},"//['cdn.xn--b6gac.eu.org', 'cdn-all.xn--b6gac.eu.org', 'edgetunnel.anycast.eu.org'];"),s(`

`),n("span",{class:"token keyword"},"let"),s(" proxyIP "),n("span",{class:"token operator"},"="),s(" proxyIPs"),n("span",{class:"token punctuation"},"["),s("Math"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"floor"),n("span",{class:"token punctuation"},"("),s("Math"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"random"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"*"),s(" proxyIPs"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"let"),s(" dohURL "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'https://sky.rethinkdns.com/1:-Pf_____9_8A_AMAIgE8kMABVDDmKOHTAKg='"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// https://cloudflare-dns.com/dns-query or https://dns.google/dns-query"),s(`

`),n("span",{class:"token comment"},"// v2board api environment variables (optional) deprecated, please use planetscale.com instead"),s(`

`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),n("span",{class:"token function"},"isValidUUID"),n("span",{class:"token punctuation"},"("),s("userID"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Error"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'uuid is invalid'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"default"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token doc-comment comment"},[s(`/**
	 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@cloudflare/workers-types"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("Request"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"request"),s(`
	 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s("UUID"),n("span",{class:"token operator"},":"),s(" string"),n("span",{class:"token punctuation"},","),s(" PROXYIP"),n("span",{class:"token operator"},":"),s(" string"),n("span",{class:"token punctuation"},","),s(" DNS_RESOLVER_URL"),n("span",{class:"token operator"},":"),s(" string"),n("span",{class:"token punctuation"},","),s(" NODE_ID"),n("span",{class:"token operator"},":"),s(" int"),n("span",{class:"token punctuation"},","),s(" API_HOST"),n("span",{class:"token operator"},":"),s(" string"),n("span",{class:"token punctuation"},","),s(" API_TOKEN"),n("span",{class:"token operator"},":"),s(" string"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"env"),s(`
	 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@cloudflare/workers-types"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("ExecutionContext"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"ctx"),s(`
	 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Promise"),n("span",{class:"token punctuation"},"<"),s("Response"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"}")]),s(`
	 */`)]),s(`
	`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"fetch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("request"),n("span",{class:"token punctuation"},","),s(" env"),n("span",{class:"token punctuation"},","),s(" ctx")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token comment"},"// uuid_validator(request);"),s(`
		`),n("span",{class:"token keyword"},"try"),s(),n("span",{class:"token punctuation"},"{"),s(`
			userID `),n("span",{class:"token operator"},"="),s(" env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"UUID"),s(),n("span",{class:"token operator"},"||"),s(" userID"),n("span",{class:"token punctuation"},";"),s(`
			proxyIP `),n("span",{class:"token operator"},"="),s(" env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"PROXYIP"),s(),n("span",{class:"token operator"},"||"),s(" proxyIP"),n("span",{class:"token punctuation"},";"),s(`
			dohURL `),n("span",{class:"token operator"},"="),s(" env"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"DNS_RESOLVER_URL"),s(),n("span",{class:"token operator"},"||"),s(" dohURL"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"let"),s(" userID_Path "),n("span",{class:"token operator"},"="),s(" userID"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("userID"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"includes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"','"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				userID_Path `),n("span",{class:"token operator"},"="),s(" userID"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"split"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"','"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(`
			`),n("span",{class:"token keyword"},"const"),s(" upgradeHeader "),n("span",{class:"token operator"},"="),s(" request"),n("span",{class:"token punctuation"},"."),s("headers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Upgrade'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("upgradeHeader "),n("span",{class:"token operator"},"||"),s(" upgradeHeader "),n("span",{class:"token operator"},"!=="),s(),n("span",{class:"token string"},"'websocket'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token keyword"},"const"),s(" url "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"URL"),n("span",{class:"token punctuation"},"("),s("request"),n("span",{class:"token punctuation"},"."),s("url"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token keyword"},"switch"),s(),n("span",{class:"token punctuation"},"("),s("url"),n("span",{class:"token punctuation"},"."),s("pathname"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
					`),n("span",{class:"token keyword"},"case"),s(),n("span",{class:"token string"},"'/cf'"),n("span",{class:"token operator"},":"),s(`
						`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Response"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"JSON"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"stringify"),n("span",{class:"token punctuation"},"("),s("request"),n("span",{class:"token punctuation"},"."),s("cf"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
							`),n("span",{class:"token literal-property property"},"status"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"200"),n("span",{class:"token punctuation"},","),s(`
							`),n("span",{class:"token literal-property property"},"headers"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
								`),n("span",{class:"token string-property property"},'"Content-Type"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"application/json;charset=utf-8"'),n("span",{class:"token punctuation"},","),s(`
							`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
						`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
					`),n("span",{class:"token keyword"},"case"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("userID_Path"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
						`),n("span",{class:"token keyword"},"const"),s(" vlessConfig "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"getVLESSConfig"),n("span",{class:"token punctuation"},"("),s("userID"),n("span",{class:"token punctuation"},","),s(" request"),n("span",{class:"token punctuation"},"."),s("headers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Host'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
						`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Response"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("vlessConfig"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
							`),n("span",{class:"token literal-property property"},"status"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"200"),n("span",{class:"token punctuation"},","),s(`
							`),n("span",{class:"token literal-property property"},"headers"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
								`),n("span",{class:"token string-property property"},'"Content-Type"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"text/html; charset=utf-8"'),n("span",{class:"token punctuation"},","),s(`
							`),n("span",{class:"token punctuation"},"}"),s(`
						`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
					`),n("span",{class:"token punctuation"},"}"),s(`
					`),n("span",{class:"token keyword"},"case"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/sub/"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("userID_Path"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
						`),n("span",{class:"token keyword"},"const"),s(" url "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"URL"),n("span",{class:"token punctuation"},"("),s("request"),n("span",{class:"token punctuation"},"."),s("url"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
						`),n("span",{class:"token keyword"},"const"),s(" searchParams "),n("span",{class:"token operator"},"="),s(" url"),n("span",{class:"token punctuation"},"."),s("searchParams"),n("span",{class:"token punctuation"},";"),s(`
						`),n("span",{class:"token keyword"},"let"),s(" vlessConfig "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"createVLESSSub"),n("span",{class:"token punctuation"},"("),s("userID"),n("span",{class:"token punctuation"},","),s(" request"),n("span",{class:"token punctuation"},"."),s("headers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Host'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
						`),n("span",{class:"token comment"},"// If 'format' query param equals to 'clash', convert config to base64"),s(`
						`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("searchParams"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'format'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},"'clash'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
							vlessConfig `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"btoa"),n("span",{class:"token punctuation"},"("),s("vlessConfig"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
						`),n("span",{class:"token punctuation"},"}"),s(`
						`),n("span",{class:"token comment"},"// Construct and return response object"),s(`
						`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Response"),n("span",{class:"token punctuation"},"("),s("vlessConfig"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
							`),n("span",{class:"token literal-property property"},"status"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"200"),n("span",{class:"token punctuation"},","),s(`
							`),n("span",{class:"token literal-property property"},"headers"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
								`),n("span",{class:"token string-property property"},'"Content-Type"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"text/plain;charset=utf-8"'),n("span",{class:"token punctuation"},","),s(`
							`),n("span",{class:"token punctuation"},"}"),s(`
						`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
					`),n("span",{class:"token punctuation"},"}"),s(`
					`),n("span",{class:"token keyword"},"case"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/bestip/"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("userID_Path"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
						`),n("span",{class:"token keyword"},"const"),s(" bestiplink "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"https://sub.xf.free.hr/auto?host="),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("request"),n("span",{class:"token punctuation"},"."),s("headers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Host'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"&uuid="),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("userID_Path"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),s(`
						`),n("span",{class:"token keyword"},"const"),s(" reqHeaders "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Headers"),n("span",{class:"token punctuation"},"("),s("request"),n("span",{class:"token punctuation"},"."),s("headers"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
						`),n("span",{class:"token keyword"},"const"),s(" bestipresponse "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"fetch"),n("span",{class:"token punctuation"},"("),s("bestiplink"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"redirect"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'manual'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"headers"),n("span",{class:"token operator"},":"),s(" reqHeaders"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
						`),n("span",{class:"token comment"},"// Construct and return response object"),s(`
						`),n("span",{class:"token keyword"},"return"),s(` bestipresponse
					`),n("span",{class:"token punctuation"},"}"),s(`
					`),n("span",{class:"token keyword"},"default"),n("span",{class:"token operator"},":"),s(`
						`),n("span",{class:"token comment"},"// return new Response('Not found', { status: 404 });"),s(`
						`),n("span",{class:"token comment"},"// For any other path, reverse proxy to 'www.fmprc.gov.cn' and return the original response, caching it in the process"),s(`
						`),n("span",{class:"token keyword"},"const"),s(" hostnames "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'www.visa.com'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'www.wto.org'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
						url`),n("span",{class:"token punctuation"},"."),s("hostname "),n("span",{class:"token operator"},"="),s(" hostnames"),n("span",{class:"token punctuation"},"["),s("Math"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"floor"),n("span",{class:"token punctuation"},"("),s("Math"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"random"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"*"),s(" hostnames"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
						url`),n("span",{class:"token punctuation"},"."),s("protocol "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'https:'"),n("span",{class:"token punctuation"},";"),s(`

						`),n("span",{class:"token keyword"},"const"),s(" newHeaders "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Headers"),n("span",{class:"token punctuation"},"("),s("request"),n("span",{class:"token punctuation"},"."),s("headers"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
						newHeaders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'cf-connecting-ip'"),n("span",{class:"token punctuation"},","),s(" newHeaders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'x-forwarded-for'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(" newHeaders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'cf-connecting-ip'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
						newHeaders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'x-forwarded-for'"),n("span",{class:"token punctuation"},","),s(" newHeaders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'cf-connecting-ip'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
						newHeaders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'x-real-ip'"),n("span",{class:"token punctuation"},","),s(" newHeaders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'cf-connecting-ip'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
						newHeaders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'referer'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'https://www.google.com/q=edtunnel'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

						request `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Request"),n("span",{class:"token punctuation"},"("),s("url"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
							`),n("span",{class:"token literal-property property"},"method"),n("span",{class:"token operator"},":"),s(" request"),n("span",{class:"token punctuation"},"."),s("method"),n("span",{class:"token punctuation"},","),s(`
							`),n("span",{class:"token literal-property property"},"headers"),n("span",{class:"token operator"},":"),s(" newHeaders"),n("span",{class:"token punctuation"},","),s(`
							`),n("span",{class:"token literal-property property"},"body"),n("span",{class:"token operator"},":"),s(" request"),n("span",{class:"token punctuation"},"."),s("body"),n("span",{class:"token punctuation"},","),s(`
							`),n("span",{class:"token literal-property property"},"redirect"),n("span",{class:"token operator"},":"),s(" request"),n("span",{class:"token punctuation"},"."),s("redirect"),n("span",{class:"token punctuation"},","),s(`
						`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

						`),n("span",{class:"token keyword"},"const"),s(" cache "),n("span",{class:"token operator"},"="),s(" caches"),n("span",{class:"token punctuation"},"."),s("default"),n("span",{class:"token punctuation"},";"),s(`
						`),n("span",{class:"token keyword"},"let"),s(" response "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" cache"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"match"),n("span",{class:"token punctuation"},"("),s("request"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

						`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("response"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
							`),n("span",{class:"token keyword"},"try"),s(),n("span",{class:"token punctuation"},"{"),s(`
								response `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"fetch"),n("span",{class:"token punctuation"},"("),s("request"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"redirect"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'manual'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
							`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"catch"),s(),n("span",{class:"token punctuation"},"("),s("err"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
								url`),n("span",{class:"token punctuation"},"."),s("protocol "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'http:'"),n("span",{class:"token punctuation"},";"),s(`
								url`),n("span",{class:"token punctuation"},"."),s("hostname "),n("span",{class:"token operator"},"="),s(" hostnames"),n("span",{class:"token punctuation"},"["),s("Math"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"floor"),n("span",{class:"token punctuation"},"("),s("Math"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"random"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"*"),s(" hostnames"),n("span",{class:"token punctuation"},"."),s("length"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
								request `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Request"),n("span",{class:"token punctuation"},"("),s("url"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
									`),n("span",{class:"token literal-property property"},"method"),n("span",{class:"token operator"},":"),s(" request"),n("span",{class:"token punctuation"},"."),s("method"),n("span",{class:"token punctuation"},","),s(`
									`),n("span",{class:"token literal-property property"},"headers"),n("span",{class:"token operator"},":"),s(" newHeaders"),n("span",{class:"token punctuation"},","),s(`
									`),n("span",{class:"token literal-property property"},"body"),n("span",{class:"token operator"},":"),s(" request"),n("span",{class:"token punctuation"},"."),s("body"),n("span",{class:"token punctuation"},","),s(`
									`),n("span",{class:"token literal-property property"},"redirect"),n("span",{class:"token operator"},":"),s(" request"),n("span",{class:"token punctuation"},"."),s("redirect"),n("span",{class:"token punctuation"},","),s(`
								`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
								response `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"fetch"),n("span",{class:"token punctuation"},"("),s("request"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"redirect"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'manual'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
							`),n("span",{class:"token punctuation"},"}"),s(`

							`),n("span",{class:"token keyword"},"const"),s(" cloneResponse "),n("span",{class:"token operator"},"="),s(" response"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
							ctx`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"waitUntil"),n("span",{class:"token punctuation"},"("),s("cache"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"put"),n("span",{class:"token punctuation"},"("),s("request"),n("span",{class:"token punctuation"},","),s(" cloneResponse"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
						`),n("span",{class:"token punctuation"},"}"),s(`
						`),n("span",{class:"token keyword"},"return"),s(" response"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token punctuation"},"}"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"vlessOverWSHandler"),n("span",{class:"token punctuation"},"("),s("request"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"catch"),s(),n("span",{class:"token punctuation"},"("),s("err"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token doc-comment comment"},[s("/** "),n("span",{class:"token keyword"},"@type"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Error"),n("span",{class:"token punctuation"},"}")]),s(" */")]),s(),n("span",{class:"token keyword"},"let"),s(" e "),n("span",{class:"token operator"},"="),s(" err"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Response"),n("span",{class:"token punctuation"},"("),s("e"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"uuid_validator"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"request"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" hostname "),n("span",{class:"token operator"},"="),s(" request"),n("span",{class:"token punctuation"},"."),s("headers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Host'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" currentDate "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Date"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token keyword"},"const"),s(" subdomain "),n("span",{class:"token operator"},"="),s(" hostname"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"split"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'.'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" year "),n("span",{class:"token operator"},"="),s(" currentDate"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getFullYear"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" month "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"String"),n("span",{class:"token punctuation"},"("),s("currentDate"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getMonth"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"padStart"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'0'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" day "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"String"),n("span",{class:"token punctuation"},"("),s("currentDate"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getDate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"padStart"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'0'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token keyword"},"const"),s(" formattedDate "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("year"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"-"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("month"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"-"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("day"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token comment"},"// const daliy_sub = formattedDate + subdomain"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" hashHex "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"hashHex_f"),n("span",{class:"token punctuation"},"("),s("subdomain"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token comment"},"// subdomain string contains timestamps utc and uuid string TODO."),s(`
	console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),s("hashHex"),n("span",{class:"token punctuation"},","),s(" subdomain"),n("span",{class:"token punctuation"},","),s(" formattedDate"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"hashHex_f"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"string"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" encoder "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TextEncoder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" data "),n("span",{class:"token operator"},"="),s(" encoder"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"encode"),n("span",{class:"token punctuation"},"("),s("string"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" hashBuffer "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" crypto"),n("span",{class:"token punctuation"},"."),s("subtle"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"digest"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'SHA-256'"),n("span",{class:"token punctuation"},","),s(" data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" hashArray "),n("span",{class:"token operator"},"="),s(" Array"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),s("hashBuffer"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" hashHex "),n("span",{class:"token operator"},"="),s(" hashArray"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"byte"),s(),n("span",{class:"token operator"},"=>"),s(" byte"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"16"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"padStart"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'0'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"return"),s(" hashHex"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Handles VLESS over WebSocket requests by creating a WebSocket pair, accepting the WebSocket connection, and processing the VLESS header.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@cloudflare/workers-types"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("Request"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"request"),s(` The incoming request object.
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Promise"),n("span",{class:"token punctuation"},"<"),s("Response"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"}")]),s(` A Promise that resolves to a WebSocket response object.
 */`)]),s(`
`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"vlessOverWSHandler"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"request"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" webSocketPair "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"WebSocketPair"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"["),s("client"),n("span",{class:"token punctuation"},","),s(" webSocket"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(" Object"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"values"),n("span",{class:"token punctuation"},"("),s("webSocketPair"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	webSocket`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"accept"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token keyword"},"let"),s(" address "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" portWithRandomLog "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" currentDate "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Date"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" log "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token doc-comment comment"},[s("/** "),n("span",{class:"token keyword"},"@type"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(" */")]),s(" info"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token doc-comment comment"},[s("/** "),n("span",{class:"token keyword"},"@type"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string "),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token keyword"},"undefined"),n("span",{class:"token punctuation"},"}")]),s(" */")]),s(" event"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
		console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"["),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("currentDate"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("address"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},":"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("portWithRandomLog"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"] "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("info"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(" event "),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" earlyDataHeader "),n("span",{class:"token operator"},"="),s(" request"),n("span",{class:"token punctuation"},"."),s("headers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'sec-websocket-protocol'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token keyword"},"const"),s(" readableWebSocketStream "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"makeReadableWebSocketStream"),n("span",{class:"token punctuation"},"("),s("webSocket"),n("span",{class:"token punctuation"},","),s(" earlyDataHeader"),n("span",{class:"token punctuation"},","),s(" log"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token doc-comment comment"},[s("/** "),n("span",{class:"token keyword"},"@type"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(" value"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@cloudflare/workers-types"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("Socket "),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}")]),s("*/")]),s(`
	`),n("span",{class:"token keyword"},"let"),s(" remoteSocketWapper "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token literal-property property"},"value"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},","),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" udpStreamWrite "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" isDns "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token comment"},"// ws --> remote"),s(`
	readableWebSocketStream`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pipeTo"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"WritableStream"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("chunk"),n("span",{class:"token punctuation"},","),s(" controller")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("isDns "),n("span",{class:"token operator"},"&&"),s(" udpStreamWrite"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token function"},"udpStreamWrite"),n("span",{class:"token punctuation"},"("),s("chunk"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(`
			`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("remoteSocketWapper"),n("span",{class:"token punctuation"},"."),s("value"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token keyword"},"const"),s(" writer "),n("span",{class:"token operator"},"="),s(" remoteSocketWapper"),n("span",{class:"token punctuation"},"."),s("value"),n("span",{class:"token punctuation"},"."),s("writable"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getWriter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
				`),n("span",{class:"token keyword"},"await"),s(" writer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),s("chunk"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				writer`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"releaseLock"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token keyword"},"return"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(`

			`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(`
				hasError`),n("span",{class:"token punctuation"},","),s(`
				message`),n("span",{class:"token punctuation"},","),s(`
				portRemote `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"443"),n("span",{class:"token punctuation"},","),s(`
				addressRemote `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},","),s(`
				rawDataIndex`),n("span",{class:"token punctuation"},","),s(`
				vlessVersion `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
				isUDP`),n("span",{class:"token punctuation"},","),s(`
			`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"processVlessHeader"),n("span",{class:"token punctuation"},"("),s("chunk"),n("span",{class:"token punctuation"},","),s(" userID"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			address `),n("span",{class:"token operator"},"="),s(" addressRemote"),n("span",{class:"token punctuation"},";"),s(`
			portWithRandomLog `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("portRemote"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("isUDP "),n("span",{class:"token operator"},"?"),s(),n("span",{class:"token string"},"'udp'"),s(),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'tcp'"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," "),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("hasError"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token comment"},"// controller.error(message);"),s(`
				`),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Error"),n("span",{class:"token punctuation"},"("),s("message"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// cf seems has bug, controller.error will not end stream"),s(`
				`),n("span",{class:"token comment"},"// webSocket.close(1000, message);"),s(`
				`),n("span",{class:"token keyword"},"return"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(`

			`),n("span",{class:"token comment"},"// If UDP and not DNS port, close it"),s(`
			`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("isUDP "),n("span",{class:"token operator"},"&&"),s(" portRemote "),n("span",{class:"token operator"},"!=="),s(),n("span",{class:"token number"},"53"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Error"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'UDP proxy only enabled for DNS which is port 53'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token comment"},"// cf seems has bug, controller.error will not end stream"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(`

			`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("isUDP "),n("span",{class:"token operator"},"&&"),s(" portRemote "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token number"},"53"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				isDns `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(`

			`),n("span",{class:"token comment"},'// ["version", "附加信息长度 N"]'),s(`
			`),n("span",{class:"token keyword"},"const"),s(" vlessResponseHeader "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),s("vlessVersion"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"const"),s(" rawClientData "),n("span",{class:"token operator"},"="),s(" chunk"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),s("rawDataIndex"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

			`),n("span",{class:"token comment"},"// TODO: support udp here when cf runtime has udp support"),s(`
			`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("isDns"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" write "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"handleUDPOutBound"),n("span",{class:"token punctuation"},"("),s("webSocket"),n("span",{class:"token punctuation"},","),s(" vlessResponseHeader"),n("span",{class:"token punctuation"},","),s(" log"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				udpStreamWrite `),n("span",{class:"token operator"},"="),s(" write"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token function"},"udpStreamWrite"),n("span",{class:"token punctuation"},"("),s("rawClientData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token keyword"},"return"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(`
			`),n("span",{class:"token function"},"handleTCPOutBound"),n("span",{class:"token punctuation"},"("),s("remoteSocketWapper"),n("span",{class:"token punctuation"},","),s(" addressRemote"),n("span",{class:"token punctuation"},","),s(" portRemote"),n("span",{class:"token punctuation"},","),s(" rawClientData"),n("span",{class:"token punctuation"},","),s(" webSocket"),n("span",{class:"token punctuation"},","),s(" vlessResponseHeader"),n("span",{class:"token punctuation"},","),s(" log"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token function"},"close"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"readableWebSocketStream is close"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token function"},"abort"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"reason"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"readableWebSocketStream is abort"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token constant"},"JSON"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"stringify"),n("span",{class:"token punctuation"},"("),s("reason"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"catch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"err"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'readableWebSocketStream pipeTo error'"),n("span",{class:"token punctuation"},","),s(" err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Response"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token literal-property property"},"status"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"101"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token literal-property property"},"webSocket"),n("span",{class:"token operator"},":"),s(" client"),n("span",{class:"token punctuation"},","),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Handles outbound TCP connections.
 *
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("any"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"remoteSocket"),s(` 
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"addressRemote"),s(` The remote address to connect to.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("number"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"portRemote"),s(` The remote port to connect to.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Uint8Array"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"rawClientData"),s(` The raw client data to write.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@cloudflare/workers-types"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("WebSocket"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"webSocket"),s(` The WebSocket to pass the remote socket to.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Uint8Array"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"vlessResponseHeader"),s(` The VLESS response header.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token keyword"},"function"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"log"),s(` The logging function.
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Promise"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"}")]),s(` The remote socket.
 */`)]),s(`
`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"handleTCPOutBound"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("remoteSocket"),n("span",{class:"token punctuation"},","),s(" addressRemote"),n("span",{class:"token punctuation"},","),s(" portRemote"),n("span",{class:"token punctuation"},","),s(" rawClientData"),n("span",{class:"token punctuation"},","),s(" webSocket"),n("span",{class:"token punctuation"},","),s(" vlessResponseHeader"),n("span",{class:"token punctuation"},","),s(" log"),n("span",{class:"token punctuation"},",")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`

	`),n("span",{class:"token doc-comment comment"},[s(`/**
	 * Connects to a given address and port and writes data to the socket.
	 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"address"),s(` The address to connect to.
	 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("number"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"port"),s(` The port to connect to.
	 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Promise"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@cloudflare/workers-types"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("Socket"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"}")]),s(` A Promise that resolves to the connected socket.
	 */`)]),s(`
	`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"connectAndWrite"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("address"),n("span",{class:"token punctuation"},","),s(" port")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token doc-comment comment"},[s("/** "),n("span",{class:"token keyword"},"@type"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@cloudflare/workers-types"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("Socket"),n("span",{class:"token punctuation"},"}")]),s(" */")]),s(`
		`),n("span",{class:"token keyword"},"const"),s(" tcpSocket "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"connect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token literal-property property"},"hostname"),n("span",{class:"token operator"},":"),s(" address"),n("span",{class:"token punctuation"},","),s(`
			`),n("span",{class:"token literal-property property"},"port"),n("span",{class:"token operator"},":"),s(" port"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		remoteSocket`),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(" tcpSocket"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"connected to "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("address"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},":"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("port"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token keyword"},"const"),s(" writer "),n("span",{class:"token operator"},"="),s(" tcpSocket"),n("span",{class:"token punctuation"},"."),s("writable"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getWriter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token keyword"},"await"),s(" writer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),s("rawClientData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// first write, nomal is tls client hello"),s(`
		writer`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"releaseLock"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token keyword"},"return"),s(" tcpSocket"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`

	`),n("span",{class:"token doc-comment comment"},[s(`/**
	 * Retries connecting to the remote address and port if the Cloudflare socket has no incoming data.
	 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Promise"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"}")]),s(` A Promise that resolves when the retry is complete.
	 */`)]),s(`
	`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"retry"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"const"),s(" tcpSocket "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"connectAndWrite"),n("span",{class:"token punctuation"},"("),s("proxyIP "),n("span",{class:"token operator"},"||"),s(" addressRemote"),n("span",{class:"token punctuation"},","),s(" portRemote"),n("span",{class:"token punctuation"},")"),s(`
		tcpSocket`),n("span",{class:"token punctuation"},"."),s("closed"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"catch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"error"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
			console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'retry tcpSocket closed error'"),n("span",{class:"token punctuation"},","),s(" error"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"finally"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token function"},"safeCloseWebSocket"),n("span",{class:"token punctuation"},"("),s("webSocket"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token function"},"remoteSocketToWS"),n("span",{class:"token punctuation"},"("),s("tcpSocket"),n("span",{class:"token punctuation"},","),s(" webSocket"),n("span",{class:"token punctuation"},","),s(" vlessResponseHeader"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},","),s(" log"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`

	`),n("span",{class:"token keyword"},"const"),s(" tcpSocket "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"connectAndWrite"),n("span",{class:"token punctuation"},"("),s("addressRemote"),n("span",{class:"token punctuation"},","),s(" portRemote"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token comment"},"// when remoteSocket is ready, pass to websocket"),s(`
	`),n("span",{class:"token comment"},"// remote--> ws"),s(`
	`),n("span",{class:"token function"},"remoteSocketToWS"),n("span",{class:"token punctuation"},"("),s("tcpSocket"),n("span",{class:"token punctuation"},","),s(" webSocket"),n("span",{class:"token punctuation"},","),s(" vlessResponseHeader"),n("span",{class:"token punctuation"},","),s(" retry"),n("span",{class:"token punctuation"},","),s(" log"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Creates a readable stream from a WebSocket server, allowing for data to be read from the WebSocket.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@cloudflare/workers-types"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("WebSocket"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"webSocketServer"),s(` The WebSocket server to create the readable stream from.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"earlyDataHeader"),s(` The header containing early data for WebSocket 0-RTT.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"("),s("info"),n("span",{class:"token operator"},":"),s(" string"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"log"),s(` The logging function.
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("ReadableStream"),n("span",{class:"token punctuation"},"}")]),s(` A readable stream that can be used to read data from the WebSocket.
 */`)]),s(`
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"makeReadableWebSocketStream"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("webSocketServer"),n("span",{class:"token punctuation"},","),s(" earlyDataHeader"),n("span",{class:"token punctuation"},","),s(" log")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" readableStreamCancel "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" stream "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"ReadableStream"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"controller"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
			webSocketServer`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addEventListener"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'message'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"event"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token keyword"},"const"),s(" message "),n("span",{class:"token operator"},"="),s(" event"),n("span",{class:"token punctuation"},"."),s("data"),n("span",{class:"token punctuation"},";"),s(`
				controller`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"enqueue"),n("span",{class:"token punctuation"},"("),s("message"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

			webSocketServer`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addEventListener"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'close'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token function"},"safeCloseWebSocket"),n("span",{class:"token punctuation"},"("),s("webSocketServer"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				controller`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"close"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

			webSocketServer`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addEventListener"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'error'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"err"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'webSocketServer has error'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				controller`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"error"),n("span",{class:"token punctuation"},"("),s("err"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token punctuation"},"{"),s(" earlyData"),n("span",{class:"token punctuation"},","),s(" error "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"base64ToArrayBuffer"),n("span",{class:"token punctuation"},"("),s("earlyDataHeader"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				controller`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"error"),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("earlyData"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				controller`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"enqueue"),n("span",{class:"token punctuation"},"("),s("earlyData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`

		`),n("span",{class:"token function"},"pull"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"controller"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token comment"},"// if ws can stop read if stream is full, we can implement backpressure"),s(`
			`),n("span",{class:"token comment"},"// https://streams.spec.whatwg.org/#example-rs-push-backpressure"),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`

		`),n("span",{class:"token function"},"cancel"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"reason"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"ReadableStream was canceled, due to "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("reason"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),s(`
			readableStreamCancel `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token function"},"safeCloseWebSocket"),n("span",{class:"token punctuation"},"("),s("webSocketServer"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token keyword"},"return"),s(" stream"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// https://xtls.github.io/development/protocols/vless.html"),s(`
`),n("span",{class:"token comment"},"// https://github.com/zizifn/excalidraw-backup/blob/main/v2ray-protocol.excalidraw"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Processes the VLESS header buffer and returns an object with the relevant information.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("ArrayBuffer"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"vlessBuffer"),s(` The VLESS header buffer to process.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"userID"),s(` The user ID to validate against the UUID in the VLESS header.
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(`
 `),n("span",{class:"token operator"},"*"),s("  hasError"),n("span",{class:"token operator"},":"),s(" boolean"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token operator"},"*"),s("  message"),n("span",{class:"token operator"},"?"),n("span",{class:"token operator"},":"),s(" string"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token operator"},"*"),s("  addressRemote"),n("span",{class:"token operator"},"?"),n("span",{class:"token operator"},":"),s(" string"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token operator"},"*"),s("  addressType"),n("span",{class:"token operator"},"?"),n("span",{class:"token operator"},":"),s(" number"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token operator"},"*"),s("  portRemote"),n("span",{class:"token operator"},"?"),n("span",{class:"token operator"},":"),s(" number"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token operator"},"*"),s("  rawDataIndex"),n("span",{class:"token operator"},"?"),n("span",{class:"token operator"},":"),s(" number"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token operator"},"*"),s("  vlessVersion"),n("span",{class:"token operator"},"?"),n("span",{class:"token operator"},":"),s(" Uint8Array"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token operator"},"*"),s("  isUDP"),n("span",{class:"token operator"},"?"),n("span",{class:"token operator"},":"),s(` boolean
 `),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}")]),s(` An object with the relevant information extracted from the VLESS header buffer.
 */`)]),s(`
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"processVlessHeader"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("vlessBuffer"),n("span",{class:"token punctuation"},","),s(" userID")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("vlessBuffer"),n("span",{class:"token punctuation"},"."),s("byteLength "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token number"},"24"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token literal-property property"},"hasError"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
			`),n("span",{class:"token literal-property property"},"message"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'invalid data'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`

	`),n("span",{class:"token keyword"},"const"),s(" version "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),s("vlessBuffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" isValidUser "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" isUDP "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" slicedBuffer "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),s("vlessBuffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"17"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" slicedBufferString "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"stringify"),n("span",{class:"token punctuation"},"("),s("slicedBuffer"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token comment"},"// check if userID is valid uuid or uuids split by , and contains userID in it otherwise return error message to console"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" uuids "),n("span",{class:"token operator"},"="),s(" userID"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"includes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"','"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"?"),s(" userID"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"split"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'","'),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s("userID"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token comment"},"// uuid_validator(hostName, slicedBufferString);"),s(`


	`),n("span",{class:"token comment"},"// isValidUser = uuids.some(userUuid => slicedBufferString === userUuid.trim());"),s(`
	isValidUser `),n("span",{class:"token operator"},"="),s(" uuids"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"some"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"userUuid"),s(),n("span",{class:"token operator"},"=>"),s(" slicedBufferString "),n("span",{class:"token operator"},"==="),s(" userUuid"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"trim"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(" uuids"),n("span",{class:"token punctuation"},"."),s("length "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token number"},"1"),s(),n("span",{class:"token operator"},"&&"),s(" slicedBufferString "),n("span",{class:"token operator"},"==="),s(" uuids"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"trim"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"userID: "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("slicedBufferString"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("isValidUser"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token literal-property property"},"hasError"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
			`),n("span",{class:"token literal-property property"},"message"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'invalid user'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`

	`),n("span",{class:"token keyword"},"const"),s(" optLength "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),s("vlessBuffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"17"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"18"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token comment"},"//skip opt for now"),s(`

	`),n("span",{class:"token keyword"},"const"),s(" command "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),s(`
		vlessBuffer`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"18"),s(),n("span",{class:"token operator"},"+"),s(" optLength"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"18"),s(),n("span",{class:"token operator"},"+"),s(" optLength "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token comment"},"// 0x01 TCP"),s(`
	`),n("span",{class:"token comment"},"// 0x02 UDP"),s(`
	`),n("span",{class:"token comment"},"// 0x03 MUX"),s(`
	`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("command "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		isUDP `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("command "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		isUDP `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token literal-property property"},"hasError"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
			`),n("span",{class:"token literal-property property"},"message"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"command "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("command"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," is not support, command 01-tcp,02-udp,03-mux"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" portIndex "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"18"),s(),n("span",{class:"token operator"},"+"),s(" optLength "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" portBuffer "),n("span",{class:"token operator"},"="),s(" vlessBuffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),s("portIndex"),n("span",{class:"token punctuation"},","),s(" portIndex "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token comment"},"// port is big-Endian in raw data etc 80 == 0x005d"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" portRemote "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"DataView"),n("span",{class:"token punctuation"},"("),s("portBuffer"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getUint16"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token keyword"},"let"),s(" addressIndex "),n("span",{class:"token operator"},"="),s(" portIndex "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" addressBuffer "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),s(`
		vlessBuffer`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),s("addressIndex"),n("span",{class:"token punctuation"},","),s(" addressIndex "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token comment"},"// 1--> ipv4  addressLength =4"),s(`
	`),n("span",{class:"token comment"},"// 2--> domain name addressLength=addressBuffer[1]"),s(`
	`),n("span",{class:"token comment"},"// 3--> ipv6  addressLength =16"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" addressType "),n("span",{class:"token operator"},"="),s(" addressBuffer"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" addressLength "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" addressValueIndex "),n("span",{class:"token operator"},"="),s(" addressIndex "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" addressValue "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"switch"),s(),n("span",{class:"token punctuation"},"("),s("addressType"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"case"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token operator"},":"),s(`
			addressLength `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},";"),s(`
			addressValue `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),s(`
				vlessBuffer`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),s("addressValueIndex"),n("span",{class:"token punctuation"},","),s(" addressValueIndex "),n("span",{class:"token operator"},"+"),s(" addressLength"),n("span",{class:"token punctuation"},")"),s(`
			`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'.'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"break"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token keyword"},"case"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token operator"},":"),s(`
			addressLength `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),s(`
				vlessBuffer`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),s("addressValueIndex"),n("span",{class:"token punctuation"},","),s(" addressValueIndex "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`
			`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
			addressValueIndex `),n("span",{class:"token operator"},"+="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`
			addressValue `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TextDecoder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"decode"),n("span",{class:"token punctuation"},"("),s(`
				vlessBuffer`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),s("addressValueIndex"),n("span",{class:"token punctuation"},","),s(" addressValueIndex "),n("span",{class:"token operator"},"+"),s(" addressLength"),n("span",{class:"token punctuation"},")"),s(`
			`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"break"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token keyword"},"case"),s(),n("span",{class:"token number"},"3"),n("span",{class:"token operator"},":"),s(`
			addressLength `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"16"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"const"),s(" dataView "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"DataView"),n("span",{class:"token punctuation"},"("),s(`
				vlessBuffer`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),s("addressValueIndex"),n("span",{class:"token punctuation"},","),s(" addressValueIndex "),n("span",{class:"token operator"},"+"),s(" addressLength"),n("span",{class:"token punctuation"},")"),s(`
			`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token comment"},"// 2001:0db8:85a3:0000:0000:8a2e:0370:7334"),s(`
			`),n("span",{class:"token keyword"},"const"),s(" ipv6 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"let"),s(" i "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(" i "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},";"),s(" i"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				ipv6`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),s("dataView"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getUint16"),n("span",{class:"token punctuation"},"("),s("i "),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"16"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(`
			addressValue `),n("span",{class:"token operator"},"="),s(" ipv6"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"join"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"':'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token comment"},"// seems no need add [] for ipv6"),s(`
			`),n("span",{class:"token keyword"},"break"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token keyword"},"default"),n("span",{class:"token operator"},":"),s(`
			`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token literal-property property"},"hasError"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
				`),n("span",{class:"token literal-property property"},"message"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"invild  addressType is "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("addressType"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
			`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("addressValue"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token literal-property property"},"hasError"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
			`),n("span",{class:"token literal-property property"},"message"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"addressValue is empty, addressType is "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("addressType"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`

	`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token literal-property property"},"hasError"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token literal-property property"},"addressRemote"),n("span",{class:"token operator"},":"),s(" addressValue"),n("span",{class:"token punctuation"},","),s(`
		addressType`),n("span",{class:"token punctuation"},","),s(`
		portRemote`),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token literal-property property"},"rawDataIndex"),n("span",{class:"token operator"},":"),s(" addressValueIndex "),n("span",{class:"token operator"},"+"),s(" addressLength"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token literal-property property"},"vlessVersion"),n("span",{class:"token operator"},":"),s(" version"),n("span",{class:"token punctuation"},","),s(`
		isUDP`),n("span",{class:"token punctuation"},","),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`


`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Converts a remote socket to a WebSocket connection.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@cloudflare/workers-types"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("Socket"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"remoteSocket"),s(` The remote socket to convert.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@cloudflare/workers-types"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("WebSocket"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"webSocket"),s(` The WebSocket to connect to.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("ArrayBuffer "),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"vlessResponseHeader"),s(` The VLESS response header.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(" Promise"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"retry"),s(` The function to retry the connection if it fails.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"("),s("info"),n("span",{class:"token operator"},":"),s(" string"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"log"),s(` The logging function.
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Promise"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"}")]),s(` A Promise that resolves when the conversion is complete.
 */`)]),s(`
`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"remoteSocketToWS"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("remoteSocket"),n("span",{class:"token punctuation"},","),s(" webSocket"),n("span",{class:"token punctuation"},","),s(" vlessResponseHeader"),n("span",{class:"token punctuation"},","),s(" retry"),n("span",{class:"token punctuation"},","),s(" log")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token comment"},"// remote--> ws"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" remoteChunkCount "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" chunks "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token doc-comment comment"},[s("/** "),n("span",{class:"token keyword"},"@type"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("ArrayBuffer "),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},"}")]),s(" */")]),s(`
	`),n("span",{class:"token keyword"},"let"),s(" vlessHeader "),n("span",{class:"token operator"},"="),s(" vlessResponseHeader"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"let"),s(" hasIncomingData "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// check if remoteSocket has incoming data"),s(`
	`),n("span",{class:"token keyword"},"await"),s(" remoteSocket"),n("span",{class:"token punctuation"},"."),s(`readable
		`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pipeTo"),n("span",{class:"token punctuation"},"("),s(`
			`),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"WritableStream"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
				`),n("span",{class:"token doc-comment comment"},[s(`/**
				 * 
				 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Uint8Array"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"chunk"),s(` 
				 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"controller"),s(` 
				 */`)]),s(`
				`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("chunk"),n("span",{class:"token punctuation"},","),s(" controller")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
					hasIncomingData `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
					remoteChunkCount`),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},";"),s(`
					`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("webSocket"),n("span",{class:"token punctuation"},"."),s("readyState "),n("span",{class:"token operator"},"!=="),s(),n("span",{class:"token constant"},"WS_READY_STATE_OPEN"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
						controller`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"error"),n("span",{class:"token punctuation"},"("),s(`
							`),n("span",{class:"token string"},"'webSocket.readyState is not open, maybe close'"),s(`
						`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
					`),n("span",{class:"token punctuation"},"}"),s(`
					`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("vlessHeader"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
						webSocket`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Blob"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),s("vlessHeader"),n("span",{class:"token punctuation"},","),s(" chunk"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"arrayBuffer"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
						vlessHeader `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},";"),s(`
					`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
						`),n("span",{class:"token comment"},"// console.log(`remoteSocketToWS send chunk ${chunk.byteLength}`);"),s(`
						`),n("span",{class:"token comment"},"// seems no need rate limit this, CF seems fix this??.."),s(`
						`),n("span",{class:"token comment"},"// if (remoteChunkCount > 20000) {"),s(`
						`),n("span",{class:"token comment"},"// 	// cf one package is 4096 byte(4kb),  4096 * 20000 = 80M"),s(`
						`),n("span",{class:"token comment"},"// 	await delay(1);"),s(`
						`),n("span",{class:"token comment"},"// }"),s(`
						webSocket`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),s("chunk"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
					`),n("span",{class:"token punctuation"},"}"),s(`
				`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
				`),n("span",{class:"token function"},"close"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
					`),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"remoteConnection!.readable is close with hasIncomingData is "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("hasIncomingData"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
					`),n("span",{class:"token comment"},"// safeCloseWebSocket(webSocket); // no need server close websocket frist for some case will casue HTTP ERR_CONTENT_LENGTH_MISMATCH issue, client will send close event anyway."),s(`
				`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
				`),n("span",{class:"token function"},"abort"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"reason"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
					console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"error"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"remoteConnection!.readable abort"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(" reason"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
			`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"catch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
			console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"error"),n("span",{class:"token punctuation"},"("),s(`
				`),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"remoteSocketToWS has exception "),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
				error`),n("span",{class:"token punctuation"},"."),s("stack "),n("span",{class:"token operator"},"||"),s(` error
			`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token function"},"safeCloseWebSocket"),n("span",{class:"token punctuation"},"("),s("webSocket"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token comment"},"// seems is cf connect socket have error,"),s(`
	`),n("span",{class:"token comment"},"// 1. Socket.closed will have error"),s(`
	`),n("span",{class:"token comment"},"// 2. Socket.readable will be close without any data coming"),s(`
	`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("hasIncomingData "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token boolean"},"false"),s(),n("span",{class:"token operator"},"&&"),s(" retry"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"retry"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),s(`
		`),n("span",{class:"token function"},"retry"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Decodes a base64 string into an ArrayBuffer.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"base64Str"),s(` The base64 string to decode.
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s("earlyData"),n("span",{class:"token operator"},":"),s(" ArrayBuffer"),n("span",{class:"token operator"},"|"),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},","),s(" error"),n("span",{class:"token operator"},":"),s(" Error"),n("span",{class:"token operator"},"|"),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}")]),s(` An object containing the decoded ArrayBuffer or null if there was an error, and any error that occurred during decoding or null if there was no error.
 */`)]),s(`
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"base64ToArrayBuffer"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"base64Str"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("base64Str"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"earlyData"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"error"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"null"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token keyword"},"try"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token comment"},"// go use modified Base64 for URL rfc4648 which js atob not support"),s(`
		base64Str `),n("span",{class:"token operator"},"="),s(" base64Str"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"-"),n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-flags"},"g")]),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'+'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"_"),n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-flags"},"g")]),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'/'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token keyword"},"const"),s(" decode "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"atob"),n("span",{class:"token punctuation"},"("),s("base64Str"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token keyword"},"const"),s(" arryBuffer "),n("span",{class:"token operator"},"="),s(" Uint8Array"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),s("decode"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"c"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(" c"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"charCodeAt"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"earlyData"),n("span",{class:"token operator"},":"),s(" arryBuffer"),n("span",{class:"token punctuation"},"."),s("buffer"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"error"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"null"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"catch"),s(),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"earlyData"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},","),s(" error "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Checks if a given string is a valid UUID.
 * Note: This is not a real UUID validation.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"uuid"),s(` The string to validate as a UUID.
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("boolean"),n("span",{class:"token punctuation"},"}")]),s(` True if the string is a valid UUID, false otherwise.
 */`)]),s(`
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"isValidUUID"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"uuid"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" uuidRegex "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"),n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-flags"},"i")]),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"return"),s(" uuidRegex"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"test"),n("span",{class:"token punctuation"},"("),s("uuid"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"WS_READY_STATE_OPEN"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"WS_READY_STATE_CLOSING"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Closes a WebSocket connection safely without throwing exceptions.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@cloudflare/workers-types"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("WebSocket"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"socket"),s(` The WebSocket connection to close.
 */`)]),s(`
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"safeCloseWebSocket"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"socket"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"try"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("socket"),n("span",{class:"token punctuation"},"."),s("readyState "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token constant"},"WS_READY_STATE_OPEN"),s(),n("span",{class:"token operator"},"||"),s(" socket"),n("span",{class:"token punctuation"},"."),s("readyState "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token constant"},"WS_READY_STATE_CLOSING"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
			socket`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"close"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"catch"),s(),n("span",{class:"token punctuation"},"("),s("error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"error"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'safeCloseWebSocket error'"),n("span",{class:"token punctuation"},","),s(" error"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"const"),s(" byteToHex "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"let"),s(" i "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(" i "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token number"},"256"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token operator"},"++"),s("i"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	byteToHex`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("i "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"256"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"16"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"unsafeStringify"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("arr"),n("span",{class:"token punctuation"},","),s(" offset "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"("),s("byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},'"-"'),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},'"-"'),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"6"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"7"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},'"-"'),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"9"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},'"-"'),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"11"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"12"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"13"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"14"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+"),s(" byteToHex"),n("span",{class:"token punctuation"},"["),s("arr"),n("span",{class:"token punctuation"},"["),s("offset "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"15"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toLowerCase"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"stringify"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("arr"),n("span",{class:"token punctuation"},","),s(" offset "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" uuid "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"unsafeStringify"),n("span",{class:"token punctuation"},"("),s("arr"),n("span",{class:"token punctuation"},","),s(" offset"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),n("span",{class:"token function"},"isValidUUID"),n("span",{class:"token punctuation"},"("),s("uuid"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token function"},"TypeError"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Stringified UUID is invalid"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token keyword"},"return"),s(" uuid"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`


`),n("span",{class:"token doc-comment comment"},[s(`/**
 * Handles outbound UDP traffic by transforming the data into DNS queries and sending them over a WebSocket connection.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"@cloudflare/workers-types"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("WebSocket"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"webSocket"),s(` The WebSocket connection to send the DNS queries over.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("ArrayBuffer"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"vlessResponseHeader"),s(` The VLESS response header.
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"("),s("string"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"log"),s(` The logging function.
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s("write"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),s("chunk"),n("span",{class:"token operator"},":"),s(" Uint8Array"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}")]),s(` An object with a write method that accepts a Uint8Array chunk to write to the transform stream.
 */`)]),s(`
`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"handleUDPOutBound"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("webSocket"),n("span",{class:"token punctuation"},","),s(" vlessResponseHeader"),n("span",{class:"token punctuation"},","),s(" log")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`

	`),n("span",{class:"token keyword"},"let"),s(" isVlessHeaderSent "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" transformStream "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"TransformStream"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token function"},"start"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"controller"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`

		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token function"},"transform"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("chunk"),n("span",{class:"token punctuation"},","),s(" controller")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token comment"},"// udp message 2 byte is the the length of udp data"),s(`
			`),n("span",{class:"token comment"},"// TODO: this should have bug, beacsue maybe udp chunk can be in two websocket message"),s(`
			`),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"let"),s(" index "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(" index "),n("span",{class:"token operator"},"<"),s(" chunk"),n("span",{class:"token punctuation"},"."),s("byteLength"),n("span",{class:"token punctuation"},";"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token keyword"},"const"),s(" lengthBuffer "),n("span",{class:"token operator"},"="),s(" chunk"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),s("index"),n("span",{class:"token punctuation"},","),s(" index "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token keyword"},"const"),s(" udpPakcetLength "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"DataView"),n("span",{class:"token punctuation"},"("),s("lengthBuffer"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getUint16"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token keyword"},"const"),s(" udpData "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),s(`
					chunk`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"slice"),n("span",{class:"token punctuation"},"("),s("index "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(" index "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"2"),s(),n("span",{class:"token operator"},"+"),s(" udpPakcetLength"),n("span",{class:"token punctuation"},")"),s(`
				`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				index `),n("span",{class:"token operator"},"="),s(" index "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"2"),s(),n("span",{class:"token operator"},"+"),s(" udpPakcetLength"),n("span",{class:"token punctuation"},";"),s(`
				controller`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"enqueue"),n("span",{class:"token punctuation"},"("),s("udpData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(`
		`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token function"},"flush"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"controller"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token comment"},"// only handle dns udp for now"),s(`
	transformStream`),n("span",{class:"token punctuation"},"."),s("readable"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pipeTo"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"WritableStream"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token keyword"},"async"),s(),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"chunk"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
			`),n("span",{class:"token keyword"},"const"),s(" resp "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token function"},"fetch"),n("span",{class:"token punctuation"},"("),s("dohURL"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"// dns server url"),s(`
				`),n("span",{class:"token punctuation"},"{"),s(`
					`),n("span",{class:"token literal-property property"},"method"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'POST'"),n("span",{class:"token punctuation"},","),s(`
					`),n("span",{class:"token literal-property property"},"headers"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
						`),n("span",{class:"token string-property property"},"'content-type'"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'application/dns-message'"),n("span",{class:"token punctuation"},","),s(`
					`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
					`),n("span",{class:"token literal-property property"},"body"),n("span",{class:"token operator"},":"),s(" chunk"),n("span",{class:"token punctuation"},","),s(`
				`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
			`),n("span",{class:"token keyword"},"const"),s(" dnsQueryResult "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"await"),s(" resp"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"arrayBuffer"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"const"),s(" udpSize "),n("span",{class:"token operator"},"="),s(" dnsQueryResult"),n("span",{class:"token punctuation"},"."),s("byteLength"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token comment"},"// console.log([...new Uint8Array(dnsQueryResult)].map((x) => x.toString(16)));"),s(`
			`),n("span",{class:"token keyword"},"const"),s(" udpSizeBuffer "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Uint8Array"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"("),s("udpSize "),n("span",{class:"token operator"},">>"),s(),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"&"),s(),n("span",{class:"token number"},"0xff"),n("span",{class:"token punctuation"},","),s(" udpSize "),n("span",{class:"token operator"},"&"),s(),n("span",{class:"token number"},"0xff"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
			`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("webSocket"),n("span",{class:"token punctuation"},"."),s("readyState "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token constant"},"WS_READY_STATE_OPEN"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
				`),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"doh success and dns message length is "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("udpSize"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("isVlessHeaderSent"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
					webSocket`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Blob"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),s("udpSizeBuffer"),n("span",{class:"token punctuation"},","),s(" dnsQueryResult"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"arrayBuffer"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
					webSocket`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"await"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Blob"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),s("vlessResponseHeader"),n("span",{class:"token punctuation"},","),s(" udpSizeBuffer"),n("span",{class:"token punctuation"},","),s(" dnsQueryResult"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"arrayBuffer"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
					isVlessHeaderSent `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},";"),s(`
				`),n("span",{class:"token punctuation"},"}"),s(`
			`),n("span",{class:"token punctuation"},"}"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"catch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"error"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'dns udp has error'"),s(),n("span",{class:"token operator"},"+"),s(" error"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token keyword"},"const"),s(" writer "),n("span",{class:"token operator"},"="),s(" transformStream"),n("span",{class:"token punctuation"},"."),s("writable"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getWriter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

	`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(`
		`),n("span",{class:"token doc-comment comment"},[s(`/**
		 * 
		 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("Uint8Array"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"chunk"),s(` 
		 */`)]),s(`
		`),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"chunk"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
			writer`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"write"),n("span",{class:"token punctuation"},"("),s("chunk"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 *
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"userID"),s(` - single or comma separated userIDs
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string "),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"hostName"),s(`
 * `),n("span",{class:"token keyword"},"@returns"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(`
 */`)]),s(`  
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"getVLESSConfig"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("userID"),n("span",{class:"token punctuation"},","),s(" hostName")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" wvlessws "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"vless://"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("userID"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"@www.visa.com:8880?encryption=none&security=none&type=ws&host="),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("hostName"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"&path=%2F%3Fed%3D2048#"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("hostName"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token keyword"},"const"),s(" pvlesswstls "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"vless://"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("userID"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"@www.visa.com:8443?encryption=none&security=tls&type=ws&host="),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("hostName"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"&sni="),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("hostName"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"&fp=random&path=%2F%3Fed%3D2048#"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("hostName"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),s(`
	
	`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("hostName"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"includes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'pages.dev'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
	  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},`
  <p>==========================配置详解==============================</p>
  
  <p>################################################################</p>
  <p>CF-pages-vless+ws+tls节点，分享链接如下：</p>
  
  <p>`),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("pvlesswstls"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},`</p>
  
  <p>---------------------------------------------------------------</p>
  <p>注意：如果 `),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("hostName"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},` 在本地网络打不开（中国移动用户注意）</p>
  <p>客户端选项的伪装域名(host)必须改为你在CF解析完成的自定义域名</p>
  <p>---------------------------------------------------------------</p>
  <p>客户端必要文明参数如下：</p>
  <p>客户端地址(address)：自定义的域名 或者 优选域名 或者 优选IP（反代IP必须与反代端口对应）</p>
  <p>端口(port)：6个https端口可任意选择(443、8443、2053、2083、2087、2096)</p>
  <p>用户ID(uuid)：`),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("userID"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},`</p>
  <p>传输协议(network)：ws 或者 websocket</p>
  <p>伪装域名(host)：`),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("hostName"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},`</p>
  <p>路径(path)：/?ed=2048</p>
  <p>传输安全(TLS)：开启</p>
  <p>跳过证书验证(allowlnsecure)：false</p>
  <p>################################################################</p>
  `),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),s(`
  
	`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("hostName"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"includes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'workers.dev'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s("  "),n("span",{class:"token punctuation"},"{"),s(`
	  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},`
  <p>==========================配置详解==============================</p>
  
  <p>################################################################</p>
  <p>一、CF-workers-vless+ws节点，分享链接如下：</p>
  
  <p>`),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("wvlessws"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},`</p>
  
  <p>---------------------------------------------------------------</p>
  <p>注意：当前节点无需使用CF解析完成的域名，客户端选项的TLS选项必须关闭</p>
  <p>---------------------------------------------------------------</p>
  <p>客户端必要文明参数如下：</p>
  <p>客户端地址(address)：自定义的域名 或者 优选域名 或者 优选IP（反代IP必须与反代端口对应）</p>
  <p>端口(port)：7个http端口可任意选择(80、8080、8880、2052、2082、2086、2095)</p>
  <p>用户ID(uuid)：`),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("userID"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},`</p>
  <p>传输协议(network)：ws 或者 websocket</p>
  <p>伪装域名(host)：`),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("hostName"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},`</p>
  <p>路径(path)：/?ed=2048</p>
  <p>################################################################</p>
  
  
  <p>################################################################</p>
  
  <p>二、CF-workers-vless+ws+tls节点注意：请在浏览器地址栏输入：你设置的自定义域名/你设置的UUID</p>
  <p>防止小白过多的操作失误，必须设置自定义域名后才能使用Workers方式的TLS模式，否则，建议只使用vless+ws节点即可</p>
  <p>提示：使用pages方式部署，联通、电信用户大概率可以直接使用TLS模式，无需设置自定义域名</p>
  <p>pages方式部署可参考此视频教程：https://youtu.be/McdRoLZeTqg</p>
  
  <p>################################################################
  `),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
	  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},`
  <p>==========================配置详解==============================</p>
  
  <p>=====使用自定义域名查看配置，请确认使用的是workers还是pages=====</p>
  
  <p>################################################################</p>
  <p>一、CF-workers-vless+ws节点，分享链接如下：</p>
  
  <p>`),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("wvlessws"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},`</p>
  
  <p>---------------------------------------------------------------</p>
  <p>注意：当前节点无需使用CF解析完成的域名，客户端选项的TLS选项必须关闭</p>
  <p>---------------------------------------------------------------</p>
  <p>客户端必要文明参数如下：</p>
  <p>客户端地址(address)：自定义的域名 或者 优选域名 或者 优选IP（反代IP必须与反代端口对应）</p>
  <p>端口(port)：7个http端口可任意选择(80、8080、8880、2052、2082、2086、2095)</p>
  <p>用户ID(uuid)：`),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("userID"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},`</p>
  <p>传输协议(network)：ws 或者 websocket</p>
  <p>伪装域名(host)：`),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("hostName"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},`</p>
  <p>路径(path)：/?ed=2048</p>
  <p>################################################################</p>
  
  <p>################################################################</p>
  <p>二、CF-workers-vless+ws+tls 或者 CF-pages-vless+ws+tls节点，分享链接如下：</p>
  
  <p>`),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("pvlesswstls"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},`</p>
  
  <p>---------------------------------------------------------------</p>
  <p>注意：客户端选项的伪装域名(host)必须改为你在CF解析完成的自定义域名</p>
  <p>---------------------------------------------------------------</p>
  <p>客户端必要文明参数如下：</p>
  <p>客户端地址(address)：自定义的域名 或者 优选域名 或者 优选IP（反代IP必须与反代端口对应）</p>
  <p>端口(port)：6个https端口可任意选择(443、8443、2053、2083、2087、2096)</p>
  <p>用户ID(uuid)：`),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("userID"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},`</p>
  <p>传输协议(network)：ws 或者 websocket</p>
  <p>伪装域名(host)：`),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("hostName"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},`</p>
  <p>路径(path)：/?ed=2048</p>
  <p>传输安全(TLS)：开启</p>
  <p>跳过证书验证(allowlnsecure)：false</p>
  <p>################################################################</p>
  `),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),v=e('<p><img src="https://img.woodli.io/img/202402011729819.png" alt=""></p><ul><li>点击 <strong>保存并部署</strong> 切记uuid要记录下来</li><li>回到workers 和 Pages中，点击你刚刚创建的Worker ，点击添加自定义域 <img src="https://img.woodli.io/img/202402011733419.png" alt=""> 输入你自定义的域名地址，例如，chatgpt-proxy.test.online, test.online为你之前添加进入cloudflare的域名 <img src="https://img.woodli.io/img/202402011734246.png" alt=""> 点击添加自定义域，等待1-3分钟 访问你刚刚的自定义域名地址+&quot;/&quot;+uuid, 例如：https://chatgpt-proxy.test.online/77a571fb-4fd2-4b37-8596-1b7d9728bb5c 内容如下： <img src="https://img.woodli.io/img/202402011737516.png" alt=""> 复制 vless://开头的文本</li></ul><h3 id="_1-4-下载v2rayn" tabindex="-1"><a class="header-anchor" href="#_1-4-下载v2rayn"><span>1.4 下载v2rayN</span></a></h3><p>参照百度</p><h3 id="_1-5-使用代理" tabindex="-1"><a class="header-anchor" href="#_1-5-使用代理"><span>1.5 使用代理</span></a></h3><p>打开v2rayN 点击服务器选择从剪切板导入批量URL <img src="https://img.woodli.io/img/202402011740253.png" alt=""> 选择代理模式 <img src="https://img.woodli.io/img/202402011742289.png" alt=""></p><p>此时即可访问Google</p><h2 id="_2-注册chatgpt账号" tabindex="-1"><a class="header-anchor" href="#_2-注册chatgpt账号"><span>2. 注册ChatGPT账号</span></a></h2>',8);function y(w,f){const o=t("ExternalLinkIcon"),c=t("Details");return l(),u("div",null,[k,n("p",null,[s("从"),n("a",d,[s("GitHUb"),a(o)]),s(",获取脚本内容")]),a(c,null,{default:i(()=>[m,b]),_:1}),v])}const h=p(r,[["render",y],["__file","chatgpt.html.vue"]]);export{h as default};
